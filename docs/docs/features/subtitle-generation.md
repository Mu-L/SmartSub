---
sidebar_position: 1
title: 字幕生成
---

# 字幕生成功能

妙幕（SmartSub）的核心功能之一是从视频或音频文件中自动生成准确的字幕。本章节将详细介绍字幕生成功能的使用方法和参数设置。

## 支持的文件格式

妙幕支持多种常见的视频和音频格式：

### 视频格式

- MP4 (.mp4)
- AVI (.avi)
- MOV (.mov)
- MKV (.mkv)
- WebM (.webm)
- WMV (.wmv)
- FLV (.flv)
- 其他常见视频格式

### 音频格式

- MP3 (.mp3)
- WAV (.wav)
- AAC (.aac)
- FLAC (.flac)
- OGG (.ogg)
- M4A (.m4a)
- 其他常见音频格式

## 字幕生成界面

<div className="img-container">
  <img src="/img/screenshots/subtitle-generation.png" alt="字幕生成界面" />
</div>

## 基本操作流程

1. 点击"选择文件"按钮或将文件拖拽到指定区域
2. 选择一个或多个视频/音频文件
3. 配置生成参数（见下文）
4. 点击"开始任务"按钮
5. 等待处理完成（进度会在界面上显示）
6. 处理完成后，字幕文件会自动保存在与源文件相同的目录下

## 参数设置

### 基本参数

| 参数         | 描述                              | 推荐设置                                             |
| ------------ | --------------------------------- | ---------------------------------------------------- |
| **模型**     | 选择用于语音识别的 Whisper 模型   | 普通场景选择 small，高精度场景选择 medium 或 large   |
| **语言**     | 指定视频/音频的原始语言           | 如果确定语言，建议指定；否则选择"自动检测"           |
| **任务类型** | 转录(Transcribe)或翻译(Translate) | 生成原语言字幕选择"转录"；直接生成翻译字幕选择"翻译" |
| **输出格式** | 生成字幕的文件格式                | SRT 格式兼容性最好                                   |

### 高级参数

| 参数             | 描述                     | 推荐设置                                            |
| ---------------- | ------------------------ | --------------------------------------------------- |
| **处理线程数**   | 处理任务使用的线程数量   | 根据您的 CPU 核心数设置，通常设为核心数的一半到全部 |
| **音频设备**     | 选择用于处理的设备       | 有 CUDA 或 Core ML 的设备上推荐选择对应硬件加速选项 |
| **始终使用大写** | 强制字幕文本使用大写     | 个人偏好                                            |
| **保持原始段落** | 保持原声中的自然段落分隔 | 建议开启，使字幕更贴合原声分段                      |

### 字幕输出选项

| 参数                     | 描述                         | 推荐设置                                         |
| ------------------------ | ---------------------------- | ------------------------------------------------ |
| **文件名模板**           | 自定义输出字幕文件的命名模式 | 默认为 `{filename}.{lang}.{ext}`，可根据需要修改 |
| **限制每行长度**         | 限制字幕每行的最大字符数     | 建议在 40-60 之间，视频分辨率较小时可设置更小值  |
| **单条字幕最大持续时间** | 单条字幕的最长时长(秒)       | 推荐 5-10 秒，太长会导致阅读困难                 |

## 输出格式详解

妙幕支持多种字幕输出格式，每种格式有其特点和适用场景：

### SRT (.srt)

- 最通用的字幕格式，几乎所有播放器都支持
- 包含序号、时间码和文本内容
- 推荐大多数场景使用

### VTT (.vtt)

- Web Video Text Tracks 格式，适用于网页视频
- HTML5 视频播放器原生支持
- 支持更多样式设置

### JSON (.json)

- 结构化数据格式，便于程序处理和二次开发
- 包含完整的时间戳和段落信息
- 适合需要进一步处理字幕数据的场景

### TXT (.txt)

- 纯文本格式，只包含文字内容，不含时间戳
- 适合仅需要提取视频文字内容的场景

## 批量处理技巧

妙幕支持批量处理多个文件，以提高工作效率：

1. **选择多个文件**：可以一次选择多个文件，或多次添加文件到任务列表
2. **统一设置**：对所有文件应用相同的处理参数
3. **队列处理**：软件会按顺序逐个处理文件，您可以设置处理完成后的操作

## 提高识别准确率的技巧

要获得更准确的字幕识别结果，请考虑以下建议：

1. **选择合适的模型**：

   - 对于清晰的普通语音，`small` 模型通常就足够
   - 对于专业术语、口音较重或背景噪音大的场景，使用 `medium` 或 `large` 模型
   - 如果视频主要是英语，可以选择带 `en` 后缀的模型（如 `small.en`）

2. **指定正确的语言**：

   - 如果确定视频中的语言，直接指定可以提高准确性
   - 对于混合多种语言的视频，选择"自动检测"

3. **优化音频条件**：

   - 输入的音频质量直接影响识别准确率
   - 如果可能，预处理视频以减少背景噪音

4. **处理长视频**：
   - 对于超长视频，可考虑分段处理后合并字幕

## 硬件加速

妙幕支持使用硬件加速来提高字幕生成速度：

- **NVIDIA CUDA**：适用于 Windows 和 Linux 系统，拥有 NVIDIA 显卡
- **Apple Core ML**：适用于搭载 Apple Silicon (M系列) 芯片的 Mac 设备

启用硬件加速：

1. 在"设置"中的"通用"选项卡
2. 找到"音频设备"选项
3. 选择对应的硬件加速选项（CUDA 或 Core ML）

## 故障排除

如果在字幕生成过程中遇到问题，可以尝试以下解决方法：

1. **程序崩溃或无响应**：

   - 尝试使用更小的模型（如从 `large` 降至 `medium` 或 `small`）
   - 减少并行任务数量

2. **识别结果不准确**：

   - 尝试使用更大的模型
   - 检查指定的语言是否正确
   - 确保音频质量良好，背景噪音较小

3. **处理速度过慢**：

   - 启用硬件加速（如有支持的硬件）
   - 选择较小的模型
   - 增加处理线程数（如果您的 CPU 有足够核心）

4. **无法正确保存字幕文件**：
   - 检查目标文件夹的写入权限
   - 尝试更改输出路径
