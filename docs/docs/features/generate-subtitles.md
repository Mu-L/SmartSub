---
sidebar_position: 1
---

# 生成字幕

SmartSub可以从视频或音频文件中自动识别语音内容并生成字幕文件。本页面将指导您如何使用这一功能。

## 准备工作

在开始生成字幕前，请确保：

1. 已成功[安装SmartSub](../getting-started/installation)
2. 已[下载至少一个Whisper模型](../getting-started/download-models)
3. 准备好需要生成字幕的视频或音频文件

## 字幕生成步骤

### 1. 添加音视频文件

有两种方式可以添加文件：

- **拖放文件**：直接将视频或音频文件拖放到应用的文件区域
- **浏览文件**：点击"添加文件"按钮，通过文件浏览器选择文件

SmartSub支持以下视频和音频格式：
- 视频：MP4, MOV, AVI, MKV, WMV, FLV等
- 音频：MP3, WAV, AAC, FLAC, OGG, M4A等

### 2. 配置生成参数

在"字幕识别"面板中设置以下参数：

- **模型**：选择要使用的Whisper模型
  - 精度更高：large > medium > small > base > tiny
  - 速度更快：tiny > base > small > medium > large
  
- **语言**：选择音视频内容的语言
  - 如果选择"自动检测"，模型将自动识别语言
  - 明确指定语言可提高识别准确率
  
- **字幕格式**：选择输出字幕文件的格式
  - SRT：最常用的字幕格式，兼容性好
  - VTT：Web字幕格式，适用于在线视频
  - JSON：包含详细时间戳和置信度的JSON格式
  
- **高级选项**（点击展开）
  - **字幕文件名**：自定义输出字幕文件的命名规则
  - **启用词级时间戳**：生成词级别的时间戳，适用于字幕对齐
  - **提示词**：提供特定的术语或指导，帮助提高识别准确率
  - **并发任务数**：同时处理的文件数量

### 3. 开始处理

设置完成后，点击"开始处理"按钮开始生成字幕。您可以在界面上看到处理进度：

- 进度条显示整体完成进度
- 状态列显示每个文件的当前处理状态
- 处理完成的文件会显示"已完成"状态

### 4. 查看和使用结果

处理完成后：

- 字幕文件将自动保存在与音视频文件相同的目录中
- 您可以点击"打开文件夹"按钮，直接打开包含生成字幕的文件夹
- 点击文件状态旁的"查看"按钮可以预览生成的字幕内容

## 处理多个文件

SmartSub支持批量处理多个文件：

1. 添加多个视频或音频文件到文件列表
2. 配置相同的处理参数（所有文件将使用相同的设置）
3. 点击"开始处理"按钮
4. 系统将按照设定的并发任务数同时处理多个文件

## 自定义字幕文件名

您可以使用以下变量来自定义生成的字幕文件名：

- `{name}` - 原始文件名（不含扩展名）
- `{ext}` - 字幕文件扩展名
- `{lang}` - 字幕语言代码

例如：
- `{name}.{lang}.{ext}` 将生成如 `视频.zh.srt` 的文件名
- `{name}_subtitle.{ext}` 将生成如 `视频_subtitle.srt` 的文件名

## 提示词使用

提示词可以帮助模型更准确地识别特定内容，特别是对于专业术语或特定领域的内容。例如：

- 医学视频：`医学术语，医生，患者，治疗方案，药物名称`
- 技术教程：`编程，代码，技术术语，软件名称`
- 电影内容：`电影对白，角色名称，场景描述`

## 硬件加速

SmartSub支持使用硬件加速来提高处理速度：

- **NVIDIA CUDA**：在Windows和Linux上，如果您的电脑有NVIDIA显卡和CUDA环境，将自动启用GPU加速
- **Apple Core ML**：在搭载M系列芯片的Mac上，将自动启用Core ML加速

要确认是否正在使用硬件加速，请查看处理日志中是否有相关提示。

## 字幕质量优化建议

为获得最佳字幕质量，请考虑以下建议：

1. **选择合适的模型**：
   - 对于重要内容，使用更大的模型（medium或large）
   - 对于测试或快速处理，可以使用较小的模型

2. **指定正确的语言**：
   - 明确指定内容语言通常比自动检测更准确
   - 对于英语内容，优先使用带`.en`后缀的模型

3. **音频质量**：
   - 高质量、清晰的音频可以大幅提高识别准确率
   - 如果原始音频有噪音，可以考虑先用音频编辑软件进行降噪处理

4. **使用提示词**：
   - 添加内容中可能出现的专业术语、人名、地名等作为提示
   - 提示词应简洁明了，只包含关键信息

## 故障排除

如果在生成字幕时遇到问题：

- **处理失败**：检查模型是否正确下载，尝试使用较小的模型
- **识别不准确**：尝试使用更大的模型或明确指定内容语言
- **处理很慢**：检查是否正在使用硬件加速，或者使用较小的模型
- **内存不足**：关闭其他占用内存的应用程序，或使用较小的模型

更多问题解决方案，请参考[故障排除](../faq/troubleshooting)章节。 