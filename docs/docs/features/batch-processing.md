---
sidebar_position: 3
title: 批量处理
---

# 批量处理功能

妙幕（SmartSub）强大的批量处理功能可以让您高效处理大量文件，无需一个一个手动操作。本章节将详细介绍如何使用批量处理功能进行字幕生成和翻译。

## 批量处理界面

<div className="img-container">
  <img src="/img/screenshots/batch-processing.png" alt="批量处理界面" />
</div>

## 批量处理的优势

- **节省时间**：同时处理多个文件，提高工作效率
- **统一设置**：对所有文件应用相同的参数设置
- **自动化工作流**：设置任务后可以离开，软件会自动完成所有处理
- **资源优化**：可以设置并行任务数，充分利用系统资源

## 批量字幕生成

### 添加多个文件的方法

1. **方法一：多选文件**

   - 点击"选择文件"按钮
   - 按住 Ctrl(Windows/Linux) 或 Command(Mac) 键选择多个文件
   - 点击"打开"按钮添加所有选中的文件

2. **方法二：多次添加**
   - 点击"选择文件"按钮并选择文件
   - 添加完成后，再次点击"选择文件"按钮添加更多文件
3. **方法三：拖放多个文件**
   - 在文件资源管理器中选择多个文件
   - 直接拖拽到妙幕的文件区域

### 批量生成字幕的步骤

1. 使用上述方法添加多个视频或音频文件
2. 设置通用处理参数（模型、语言、输出格式等）
3. 配置批量处理选项：
   - **并行任务数**：根据系统性能设置（通常为CPU核心数的一半至全部）
   - **任务完成行为**：选择任务完成后的操作（如通知、关机等）
4. 点击"开始任务"按钮
5. 软件会按照设置自动处理所有文件

<div className="img-container">
  <img src="/img/screenshots/batch-generation.png" alt="批量字幕生成" />
</div>

## 批量字幕翻译

### 批量翻译的步骤

1. 切换到"字幕翻译"选项卡
2. 添加多个字幕文件（使用与上述相同的方法）
3. 设置翻译参数（源语言、目标语言、翻译服务等）
4. 配置批量处理选项：
   - **并行请求数**：根据网络条件和API限制设置
   - **翻译模式**：选择仅翻译或原文+翻译
5. 点击"开始任务"按钮
6. 软件会自动翻译所有字幕文件

<div className="img-container">
  <img src="/img/screenshots/batch-translation.png" alt="批量字幕翻译" />
</div>

## 任务队列管理

批量处理时，妙幕会创建一个任务队列，您可以：

1. **查看任务状态**：界面上会显示当前处理的文件和总体进度
2. **取消单个任务**：点击任务旁的"取消"按钮
3. **取消所有任务**：点击"取消所有"按钮
4. **暂停/恢复队列**：暂时停止处理，稍后再继续

## 批量处理设置

### 并行处理设置

妙幕允许您根据系统性能调整并行处理的设置：

| 设置项             | 描述                               | 推荐设置                                             |
| ------------------ | ---------------------------------- | ---------------------------------------------------- |
| **并行任务数**     | 同时处理的文件数量                 | 一般设为CPU核心数的一半至全部，性能较弱的设备设为1-2 |
| **并行翻译请求数** | 同时发送的翻译请求数               | 根据网络条件和API限制，通常设为3-10                  |
| **预加载下一任务** | 是否在当前任务完成前准备下一个任务 | 建议开启，可减少任务间的等待时间                     |

### 任务完成行为

您可以设置批量任务完成后的自动操作：

- **通知**：显示系统通知
- **播放声音**：播放提示音
- **自动关机**：完成所有任务后关闭计算机（适合长时间处理）
- **休眠/睡眠**：完成后使计算机进入睡眠状态

## 高级批量处理技巧

### 文件夹批处理

虽然妙幕当前版本不直接支持选择整个文件夹，但您可以：

1. 在文件资源管理器中打开文件夹
2. 按 Ctrl+A (Windows/Linux) 或 Command+A (Mac) 选择所有文件
3. 筛选所需文件类型（视频/音频/字幕）
4. 拖拽所有选中文件到妙幕界面

### 批处理不同类型的任务

您可以根据文件类型自动应用不同的处理参数：

1. 为特定格式文件设置默认参数（在设置中配置）
2. 添加混合类型的文件（如不同语言的视频）
3. 妙幕会根据文件特征自动应用合适的设置

### 任务监控与资源管理

处理大量文件时，请注意：

1. **监控系统资源**：大型模型可能占用大量内存和GPU资源
2. **调整参数**：如果系统过载，减少并行任务数或使用较小的模型
3. **分批处理**：对于超大量文件，考虑分成多个批次处理

## 批量处理常见问题

1. **处理速度变慢**：

   - 减少并行任务数
   - 关闭其他占用资源的应用
   - 使用较小的模型
   - 检查硬盘空间是否充足

2. **部分文件处理失败**：

   - 检查文件格式是否支持
   - 检查文件是否损坏
   - 查看日志以获取错误详情
   - 单独处理失败的文件以确定问题

3. **翻译API限流**：

   - 减少并行翻译请求数
   - 增加请求间隔时间
   - 考虑使用其他翻译服务
   - 对于DeepLX，特别注意批量翻译容易被限流

4. **系统资源不足**：
   - 使用较小的模型
   - 减少并行任务数
   - 释放系统内存
   - 考虑在性能更强的设备上运行

## 批量处理最佳实践

1. **先小后大**：

   - 先处理一小部分文件测试设置是否合适
   - 确认结果符合预期后再处理大批量文件

2. **分类处理**：

   - 按语言或内容类型将文件分组
   - 为每组使用最适合的设置

3. **资源规划**：

   - 长时间批处理前确保系统稳定
   - 关闭不必要的应用
   - 确保有足够的磁盘空间

4. **结果检查**：
   - 处理完成后抽查部分结果
   - 特别注意第一个和最后一个文件
   - 根据检查结果调整设置并重新处理有问题的文件
